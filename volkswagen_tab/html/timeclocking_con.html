<html lang="ko" class="k-webkit k-webkit128 k-mobile">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <title>WDMS STG</title>

    <link rel="stylesheet" type="text/css" href="https://m.stg-vwgkwdms.co.kr/resources/mob/css/libs/kendo/kendo.common.min.css">
    <link rel="stylesheet" type="text/css" href="https://m.stg-vwgkwdms.co.kr/resources/mob/css/libs/kendo/kendo.mobile.all.min.css">
    <link rel="stylesheet" type="text/css" href="https://m.stg-vwgkwdms.co.kr/resources/mob/css/libs/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="../resources/mob/css/style.css?ver=1.3">
    <link rel="stylesheet" type="text/css" href="https://m.stg-vwgkwdms.co.kr/resources/css/libs/slick.css">
    <!-- js -->
    
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/mob/js/jquery-3.7.1.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/jquery.blockUI.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/jquery.fileDownload.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/mob/js/kendo/kendo.all.min.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/mob/js/dms/dms.common-1.0.js?ver=1.3"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/cmm/sci/js/selectCultureSettings.do"></script>
    
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/mob/js/dms/jquery.ext-1.0.js"></script>
    
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/mob/js/pub-ui.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/dms/crm/crm.common.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/dms/sal/sal.common.js"></script>
    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/slick.min.js"></script>

    <script type="text/javascript" src="https://m.stg-vwgkwdms.co.kr/resources/js/dms/kendo.ui.ext-1.0.js"></script>
    
    
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            var viewportMeta = document.querySelector('meta[name="viewport"]');

            if (!viewportMeta) {
                viewportMeta = document.createElement('meta');
                viewportMeta.name = 'viewport';
                document.head.appendChild(viewportMeta);
            }

            // 화면 너비가 768px 미만일 경우 (모바일)
            if (window.innerWidth < 768) {
                viewportMeta.content = 'user-scalable=no,width=375';
            } else {
                // 태블릿 및 그 이상일 경우
                viewportMeta.content = 'width=device-width,initial-scale=1,user-scalable=no';
            }
        });
    </script>
    </head>

<body>
    <!--MO07030100-->
    <div id="wrap">
        <header id="header" class="header">
            <div class="header-left">
                <button class="btn btn-util back">
                    <span class="sr-only">뒤로가기</span>
                </button>
            </div>
            <h1 class="header-title">Time Clocking</h1>
            <div class="header-right">
                <button class="btn btn-util menu">
                    <span class="sr-only">메뉴</span>
                </button>
            </div>
        </header>
        <div id="content" class="bg scroll-hidden">
            <div class="cont-body mo-body">
                <div class="info-wrap">
                    <div class="user-info-area">
                        <div class="info-sec">
                            <!-- 아코디언 -->
                            <ul class="accordion" id="accordion1">
                                <li class="accordion-item">
                                    <div class="accordion-header">
                                        <div class="accordion-title">
                                            <p class="title">W Time</p>
                                        </div>
                                        <button class="accordion-btn">
                                            <span class="sr-only">펼침</span>
                                        </button>
                                    </div>
                                    <div class="accordion-panel">
                                        <div class="agreement-area-wrap">
                                            <div class="card-list">
                                                <ul id="listview1A" class="list-group check-list col-2"
                                                    data-role="listview"></ul>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <!-- //아코디언 -->
                        </div>
                        <div class="info-sec">
                            <div class="title-area">
                                <div class="title-left">
                                    <p class="title">배정 RO</p>
                                </div>
                            </div>
                            <!-- 아코디언 -->
                            <!--N : time-cloking 클래스 추가-->
                            <ul class="accordion time-cloking" id="accordion2">
                                <li class="accordion-item">
                                    <div class="accordion-header">
                                        <div class="accordion-title title-flex">
                                            <div class="title-left">
                                                <!--N : title 색상 추가시 fc-point -->
                                                <p class="title fc-point">[경] RO2829020009</p>
                                            </div>
                                            <div class="title-right">
                                                <p class="text bold">923가6234</p>
                                                <p class="text">09-20 22:40</p>
                                            </div>
                                        </div>
                                        <button class="accordion-btn">
                                            <span class="sr-only">펼침</span>
                                        </button>
                                    </div>
                                    <div class="accordion-panel">
                                        <div class="agreement-area-wrap">
                                            <div class="card-list">
                                                <!--N : dis-block 클래스추가-->
                                                <div class="list-header dis-block">
                                                    <!--N : 버튼 태그 전체 변경-->
                                                    <!--N : list-header-center -> content-btn-sgroup로 클래스 변경 및 btn-secondary 클래스 삭제, 스타일제거 -->
                                                    <div class="content-btn-sgroup">
                                                        <button type="button"
                                                            class="btn btn-sm btn-sub btn-util document">
                                                            <span>작업지시서</span>
                                                        </button>
                                                        <button type="button" class="btn btn-sm btn-sub btn-util write">
                                                            <span>작업자의견</span>
                                                        </button>
                                                        <button type="button" class="btn btn-sm btn-sub btn-util time">
                                                            <span>타임클락킹취소</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ul id="listgroup1B" class="timecloking-list"></ul>
                                            </div>
                                            <div class="agreement-btn">
                                                <button type="button" class="btn btn-secondary">차량점검 및 추가작업 요청</button>
                                                <button type="button" class="btn btn-secondary">Final Inspection
                                                    요청</button>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <!-- //아코디언 -->
                        </div>
                        <div class="info-sec">
                            <div class="title-area">
                                <div class="title-left">
                                    <p class="title">미배정 RO</p>
                                </div>
                            </div>
                            <div class="search-body-title">
                                <div class="input-area">
                                    <input type="text" class="basic-input" placeholder="차량번호 입력">
                                    <button type="button" class="btn btn-secondary btn-sm">조회</button>
                                </div>
                            </div>
                            <!-- 아코디언 -->
                            <ul class="accordion time-cloking" id="accordion3">
                                <li class="accordion-item">
                                    <div class="accordion-header">
                                        <div class="accordion-title title-flex">
                                            <div class="title-left">
                                                <p class="title">[메] RO2408000078</p>
                                            </div>
                                            <div class="title-right">
                                                <p class="text bold">923가6234</p>
                                                <p class="text">09-20 22:40</p>
                                            </div>
                                        </div>
                                        <button class="accordion-btn">
                                            <span class="sr-only">펼침</span>
                                        </button>
                                    </div>
                                    <div class="accordion-panel">
                                        <div class="agreement-area-wrap">
                                            <div class="card-list">
                                                <div class="list-header dis-block">
                                                    <!--N : 버튼 태그 전체 변경-->
                                                    <!--N : list-header-center -> content-btn-sgroup로 클래스 변경 및 btn-secondary 클래스 삭제, 스타일제거 -->
                                                    <div class="content-btn-sgroup">
                                                        <button type="button"
                                                            class="btn btn-sm btn-sub btn-util document">
                                                            <span>작업지시서</span>
                                                        </button>
                                                        <button type="button" class="btn btn-sm btn-sub btn-util write">
                                                            <span>작업자의견</span>
                                                        </button>
                                                        <button type="button" class="btn btn-sm btn-sub btn-util time">
                                                            <span>타임클락킹취소</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ul id="listgroup1D" class="timecloking-list"></ul>
                                            </div>
                                            <div class="agreement-btn">
                                                <button type="button" class="btn btn-secondary">차량점검 및 추가작업 요청</button>
                                                <button type="button" class="btn btn-secondary">Final Inspection
                                                    요청</button>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <!-- //아코디언 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer id="footer" class="footer">
            <div class="search-footer">
                <div class="input-area">
                    <select class="basic-select">
                        <option value="">Workbay/층 선택</option>
                        <option value="1">item1</option>
                        <option value="2">item2</option>
                        <option value="3">item3</option>
                        <option value="4">item4</option>
                    </select>
                </div>
            </div>
            <div class="footer-btn half">
                <button type="button" class="btn btn-secondary">Time Clocking 시작</button>
                <button type="button" class="btn btn-secondary">Time Clocking 완료</button>
            </div>
        </footer>
    </div>
    <!-- list template -->
    <script id="tmp1" type="text/x-kendo-template">
        <input type="checkbox" id="#: checkbox.checkId #" class="list-checkbox" #: checkbox.option #>
        <label for="#: checkbox.checkId #" class="list-checkbox-label">
            <div class="item-area">
                <div class="item-left break">
                    <p class="item-text">#: title #</p>
                </div>
            </div>
        </label>
    </script>
    <script id="tmp2group" type="text/x-kendo-template">
        <div class="content-btn-sgroup mb10">
            <!--N : 전체체크 표시 active 클래스 추가-->
            <!--작업종료 일경우 : end, 작업종료 : complete, 진행중 : start-->
            <button type="button" class="btn btn-list-chk">
                <strong>#: timeNum #</strong>
                <strong>#: timeTxt1 #<span>[총#: things #건]</span></strong>
                <span class="pos-abs label #: color #">#: timeTxt2 #</span>
            </button>
        </div>
        <!--//N : 버튼 태그 전체 변경-->
        <ul id="listview1B_#: id #" class="list-group check-list" data-role="listview"></ul>
        <ul id="listview1D_#: id #" class="list-group check-list" data-role="listview"></ul>
    </script>
    <script id="tmp2" type="text/x-kendo-template">
        <div>
            <input type="checkbox" id="#: checkbox.checkId #" class="list-checkbox" #: checkbox.option #>
            <label for="#: checkbox.checkId #" class="list-checkbox-label">
                <div class="item-area">
                    <div class="item-area-con">
                        <div class="item-link-group #: status #">
                            <a href="#: link #" class="link-arr-text aDetail">공임상세</a>
                        </div>
                        <div class="item-text-group">
                            <p class="item-text">#: title #</p>
                        </div>
                        <div class="item-md-text-group">
                            <p class="item-md-text">#: text1 #</p>
                            <p class="item-md-text">#: text2 #</p>
                        </div>
                    </div>
                </div>
            </label>
        </div>
    </script>
    <!-- // list template -->

    <script>
        // 아코디언
        var acc1 = document.querySelector("#accordion1");
        accordionEvent(acc1);
        var acc2 = document.querySelector("#accordion2");
        accordionEvent(acc2);
        var acc3 = document.querySelector("#accordion3");
        accordionEvent(acc3);
        // W Time data
        var groupedData1A = [
            {
                title: "다음작업 대기",
                checkbox: { checkId: "checkA1", option: "checked" }
            },
            {
                title: "부품수령 이동 및 대기",
                checkbox: { checkId: "checkA2", option: "" }
            },
            {
                title: "주차 및 작업차량 이동",
                checkbox: { checkId: "checkA3", option: "" }
            },
            {
                title: "시운전 및 End Control",
                checkbox: { checkId: "checkA4", option: "checked" }
            },
            {
                title: "긴급출동",
                checkbox: { checkId: "checkA5", option: "" }
            },
            {
                title: "청구불가 작업 CR 및 재 작업",
                checkbox: { checkId: "checkA6", option: "" }
            },
            {
                title: "작업장 청소",
                checkbox: { checkId: "checkA7", option: "checked" }
            },
            {
                title: "점심시간",
                checkbox: { checkId: "checkA8", option: "" }
            },
            {
                title: "기술 리포트 및 데스크 업무",
                checkbox: { checkId: "checkA9", option: "" }
            },
        ];
        // 배정 RO
        var groupedData1B = [
            {
                id: "03_001",
                timeNum: "1000",
                timeTxt1: "작업개시",
                things: "3",
                color: "ing",
                timeTxt2: "진행중",
                /*subData3: [
                    {
                        link: "javascript:;",
                        status: "ing",
                        title: "액티브 스태빌라이저 액티브 스태빌라이저 텍스트 테스트 테스트", 
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox : {checkId : "checkB1", option: "checked"}
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체", 
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox : {checkId : "checkB2", option: ""}
                    }
                ]*/
            },
            {
                id: "03_002",
                timeNum: "1000",
                timeTxt1: "작업개시",
                things: "3",
                color: "end",
                timeTxt2: "종료",
                subData3: [
                    {
                        link: "javascript:;",
                        status: "ing",
                        title: "액티브 스태빌라이저 액티브 스태빌라이저 텍스트 테스트 테스트",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB3", option: "checked" }
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB4", option: "" }
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체 및 기타",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB5", option: "" }
                    },
                ]
            }
        ];
        // 배정 RO
        var groupedData1D = [
            {
                id: "04_001",
                timeNum: "1000",
                timeTxt1: "작업개시",
                things: "3",
                color: "ing",
                timeTxt2: "진행중",
                subData4: [
                    {
                        link: "javascript:;",
                        status: "ing",
                        title: "액티브 스태빌라이저 액티브 스태빌라이저 텍스트 테스트 테스트",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB1", option: "checked" }
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB2", option: "" }
                    }
                ]
            },
            {
                id: "04_002",
                timeNum: "1000",
                timeTxt1: "작업개시",
                things: "3",
                color: "end",
                timeTxt2: "종료",
                subData4: [
                    {
                        link: "javascript:;",
                        status: "ing",
                        title: "액티브 스태빌라이저 액티브 스태빌라이저 텍스트 테스트 테스트",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB3", option: "checked" }
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB4", option: "" }
                    },
                    {
                        link: "javascript:;",
                        status: "",
                        title: "엔진오일교체 및 기타",
                        text1: "10FRU",
                        text2: "15:10~15:30",
                        checkbox: { checkId: "checkB5", option: "" }
                    },
                ]
            }
        ];
        $("#listview1A").kendoMobileListView({
            dataSource: kendo.data.DataSource.create({ data: groupedData1A }),
            template: kendo.template($("#tmp1").html()),
        })

        $("#listgroup1B").kendoMobileListView({
            dataSource: kendo.data.DataSource.create({ data: groupedData1B }),
            template: kendo.template($("#tmp2group").html()),
            dataBound: function () {
                var view = this.dataSource.view();
                view.forEach(function (item) {
                    var subList = $("#listview1B_" + item.id);
                    if (subList.length && item.subData3) {
                        setTimeout(function () {
                            subList.kendoMobileListView({
                                dataSource: kendo.data.DataSource.create({ data: item.subData3 }),
                                template: kendo.template($("#tmp2").html())
                            });
                        }, 0);
                    }
                });
            }
        });
        $("#listgroup1D").kendoMobileListView({
            dataSource: kendo.data.DataSource.create({ data: groupedData1D }),
            template: kendo.template($("#tmp2group").html()),
            dataBound: function () {
                var view = this.dataSource.view();
                view.forEach(function (item) {
                    var subList = $("#listview1D_" + item.id);
                    if (subList.length && item.subData4) {
                        setTimeout(function () {
                            subList.kendoMobileListView({
                                dataSource: kendo.data.DataSource.create({ data: item.subData4 }),
                                template: kendo.template($("#tmp2").html())
                            });
                        }, 0);
                    }
                });
            }
        });
        // 텍스트가 10자 이상이면 break 클래스 추가
        $(".btn-list-chk strong").each(function () {
            var textLength = $(this).text().trim().length;
            if (textLength > 10) {
                $(this).closest('.btn-list-chk').addClass('break');
            }
        });

    </script>
</body>

</html>